"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[288],{288:function(e,t,n){n.r(t),n.d(t,{default:function(){return Je}});var a=n(2791),i=n(586),r=n(3388),l=n(7888),s=n(1087),o=n(7689),c=n(8935),d=n(7309),u=n(184);function h(){return(0,u.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(s.rU,{to:"/",children:(0,u.jsx)(d.Z,{type:"primary",children:"Back Home"})})})}var f=n(7063),x=n(1413),p=n(9439),Z=n(2339),m=n(5820),j=n(8302),g=n(4260),v=n(7615),y=n(6106),b=n(914),C=n(458),S=n(9998),I=n(43),k=n(9389),w=n(1717),D=n(2622),T=n(1752),U=n(9286),_=n(7106),R=n(5671),A=n(3144),L=n(7205),q=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return L.Z.get("coupon/list",{params:e})}},{key:"save",value:function(e,t){return L.Z.post("coupon/save",e,{params:t})}},{key:"delete",value:function(e){return L.Z.post("coupon/delete",{ids:e})}},{key:"details",value:function(e){return L.Z.get("coupon/details/"+e)}}]),e}();q.baseURL="";var F=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"listUser",value:function(e){return L.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e){return L.Z.post(this.baseURL+"/save-user",e)}},{key:"deleteUser",value:function(e){return L.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();F.baseURL="user";var N=n(4099);function O(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(N.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(Z.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,x.Z)((0,x.Z)({},t),{},{page:1,limit:a})):n((0,x.Z)((0,x.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var P=n(2426),E=n.n(P),B=n(7027);function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&B.ZP.success(e),"error"===t&&B.ZP.error(e),"warning"===t&&B.ZP.warning(e))}var z=n(7892),Y=n.n(z);function V(){var e=(0,a.useState)([]),t=(0,p.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,p.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,p.Z)(y,2),C=b[0],S=b[1],I=(0,a.useState)([]),k=(0,p.Z)(I,2),w=k[0],U=k[1],_=(0,a.useRef)(),R=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",width:150,dataIndex:"title"},{title:"Code",width:100,dataIndex:"code"},{title:"EndDate",width:100,dataIndex:"expiryDate"},{title:"Discount Value",width:100,dataIndex:"discountValue"},{title:"Coupon Use",width:100,dataIndex:"typeOfUse"},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){L(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){_.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){o(!0),q.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)({key:e._id},e)})).reverse()),S((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var L=function(e){q.delete(e).then((function(e){M(e.message),A(),v([])})).catch((function(e){M(e.message,"error")}))},N=R.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));console.log(N),N[0].fixed=!0,N[N.length-1].fixed="right";var P={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(H,{addNewModalRef:_,selected:f,deleteData:L,qData:C,setQData:S,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A(),F.listUser().then((function(e){U(e.data||[])})).catch((function(e){M("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Coupon"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},P),{},{pagination:{position:["none"],pageSize:C.limit},columns:N,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Q,{ref:_,list:A,user:w})]})}function H(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,r=e.qData,l=e.setQData,s=e.list,o=(0,a.useState)([]),c=(0,p.Z)(o,2),h=c[0],f=c[1];return(0,a.useEffect)((function(){q.list().then((function(e){var t;f(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{label:e.title,value:e._id}})))}))}),[]),console.log(h),(0,u.jsx)(v.Z,{onSubmitCapture:s,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",onChange:function(e){return l((0,x.Z)((0,x.Z)({},r),{},{_id:e,title:h[0].label}))},options:h})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var Q=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.user,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],D=j[1],T=(0,a.useState)([]),U=(0,p.Z)(T,2),R=(U[0],U[1]),A=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,x.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{fileType:"photo"})}}}));var L=function(){D(!0),q.save(f).then((function(e){M(e.message),A((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){f._id&&(D(!0),q.details(f._id).then((function(e){var t,n;Z(e.data||{}),R(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){M(e.message,"error")})).finally((function(){D(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?R([]):Z({_id:null})}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" Coupon",style:{top:20},open:s,okText:"Save",onOk:L,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:L,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Title",value:f.title,onChange:function(e){A({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Max DiscountValue",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Max DiscountValue",value:f.maxDiscountValue,onChange:function(e){A({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(k.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){A({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Discount Type",required:!0,children:(0,u.jsxs)(C.Z,{value:f.discountType,onChange:function(e){A({discountType:e})},children:[(0,u.jsx)(C.Z.Option,{value:"percent",children:"Percent"}),(0,u.jsx)(C.Z.Option,{value:"flat",children:"Flat"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Code",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Code",value:f.code,onChange:function(e){A({code:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Expiry Date",required:!0,children:(0,u.jsx)(w.Z,{format:"DD MMM YYYY",onChange:function(e){A({expiryDate:e})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Discount Value",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"discountValue",value:f.discountValue,onChange:function(e){A({discountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"User",children:(0,u.jsx)(C.Z,{mode:"multiple",value:f.userIds,onChange:function(e){A({userIds:e})},options:i.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Coupon Type",required:!0,children:(0,u.jsxs)(C.Z,{value:f.typeOfUse,onChange:function(e){A({typeOfUse:e})},children:[(0,u.jsx)(C.Z.Option,{value:"Single",children:"Single Use"}),(0,u.jsx)(C.Z.Option,{value:"Multiple",children:"Multiple Use"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:f.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),J=n(3433),W=n(6002),K=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detail",value:function(e){return L.Z.get(this.baseURL+"/details/"+e.type,{params:e})}},{key:"list",value:function(e){return L.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return L.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return L.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();K.baseURL="application";var G=n(9687);function X(e){var t=e.height,n=void 0===t?400:t,i=e.menubar,r=void 0!==i&&i,l=e.plugins,s=e.toolbar,o=e.content_style,c=e.initialValue,d=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor","image paste table code"]),s||(s="undo redo | formatselect | bold italic backcolor | forecolor emoticons| table tabledelete | tableprops tablerowprops tablecellprops| alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help | image link | imageupload | code | fullscreen"),o||(o="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var h=(0,a.useRef)(null);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(G.M,{onInit:function(e,t){return h.current=t},initialValue:c,init:{height:n,menubar:r,plugins:l,toolbar:s,content_style:o,file_browser_callback_types:"image",file_picker_callback:function(e,t,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result,{title:t.name})}},a.click()},deprecation_warnings:!1},onSelectionChange:function(){h.current&&d(h.current.getContent())}})})}function $(){var e=(0,a.useState)({aspect:1}),t=(0,p.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),s=(0,p.Z)(r,2),o=s[0],c=s[1],h=(0,a.useState)(0),f=(0,p.Z)(h,2),Z=f[0],m=f[1],j=function(e,t){t&&(Object.entries(e).forEach((function(e){for(var t=n,a=e[0],i=e[1],r=a.split("."),l=0;l<r.length;l++)l+1===r.length?t[r[l]]=i:("undefined"===typeof t[r[l]]&&(1*parseInt(r[l+1])>=0?t[r[l]]=[]:t[r[l]]={}),t=t[r[l]])})),i((0,x.Z)({},n)))},g=function(){c(!0);try{(0===Z?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"aboutus",data:n.data})):1===Z?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"termcondition",data:n.data})):2===Z?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"faq",data:n.data})):3===Z?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"contactus",data:n.data})):4===Z?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"privacy-policy",data:n.data})):null).then((function(e){M(e.message),j((0,x.Z)({},e.data)),m((Z+1)%5)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){c(!1)}))}catch(e){M(e.message,"error")}},v=function(e){c(!0),K.detail(e).then((function(e){i(e.data||{})})).catch((function(e){M(e.message,"error")})).finally((function(){c(!1)}))};return(0,a.useEffect)((function(){0===Z?v({_id:n._id,type:"aboutus"}):1===Z?v({_id:n._id,type:"termcondition"}):2===Z?v({_id:n._id,type:"faq"}):3===Z?v({_id:n._id,type:"contactus"}):4===Z&&v({_id:n._id,type:"privacy-policy"})}),[Z]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(I.Z,{spinning:o,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(W.Z,{activeKey:Z,type:"card",size:"small",style:{marginBottom:0},onChange:function(e){m(e)},items:[{label:"About us",key:0,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ee,{data:n,handleChange:j,save:g})})},{label:"Terms & Condition",key:1,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(te,{data:n,handleChange:j,save:g})})},{label:"FAQ",key:2,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ne,{data:n,handleChange:j,save:g})})},{label:"Contact us",key:3,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ae,{data:n,handleChange:j,save:g})})},{label:"Privacy Policy",key:4,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ie,{data:n,handleChange:j,save:g})})}]}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingTop:"5px",paddingRight:"70px"},children:(0,u.jsx)(d.Z,{type:"primary",onClick:g,children:4===Z?"Save":"Next"},"save")})]})})}var ee=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},te=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},ne=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},ae=function(e){var t,n=e.data,i=e.handleChange,r=(0,a.useState)("This is an editable text."),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([1]),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)([1]),g=(0,p.Z)(m,2),C=g[0],S=g[1];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],style:{width:"100%",padding:"0 5px"},children:[(0,u.jsxs)(b.Z,{xs:24,xl:6,children:[f.map((function(){return(0,u.jsx)(v.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(j.Z.Paragraph,{style:{marginTop:"8px"},editable:{onChange:o},children:s})})})),(0,u.jsx)(d.Z,{onClick:function(){return Z((function(e){return[].concat((0,J.Z)(e),[1])}))},children:"Add"})]}),(0,u.jsxs)(b.Z,{xs:24,xl:6,children:[C.map((function(){return(0,u.jsx)(v.Z.Item,{label:"Phone Number",required:!0,children:(0,u.jsx)(j.Z.Paragraph,{style:{marginTop:"8px"},editable:{onChange:o},children:s})})})),(0,u.jsx)(d.Z,{onClick:function(){return S((function(e){return[].concat((0,J.Z)(e),[1])}))},children:"Add"})]}),(0,u.jsx)(b.Z,{xs:24,xl:12,children:(0,u.jsx)(v.Z.Item,{label:"Address",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Street No: 9, Delhi: 110054",value:null===(t=n.data)||void 0===t?void 0:t.address,onChange:function(e){i({data:(0,x.Z)((0,x.Z)({},n.data),{},{address:e.target.value})})}})})})]})})})},ie=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},re=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return L.Z.get(this.baseURL+"category/list",{params:e})}},{key:"save",value:function(e,t){return L.Z.post(this.baseURL+"category/save",e,{params:t})}},{key:"delete",value:function(e){return L.Z.post(this.baseURL+"category/delete",{ids:e})}},{key:"details",value:function(e){return L.Z.get(this.baseURL+"category/details/"+e)}}]),e}();re.baseURL="/ecommerce/";var le=n(151);function se(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,p.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,p.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,parentId:t}),S=(0,p.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),U=(0,a.useRef)(),_=[{title:"#",width:25,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:200},{title:"Lable",dataIndex:"lable",width:100,render:function(e,t){return(0,u.jsx)(d.Z,{onClick:function(){U.current.openForm(t)},children:" Detail"})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){A(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),re.list(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),k((0,x.Z)((0,x.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var A=function(e){re.delete(e).then((function(e){M(e.message),R(),b([])})).catch((function(e){M(e.message,"error")}))},L=_.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var q={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(oe,{addNewModalRef:w,selected:y,deleteData:A,qData:I,setQData:k,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Category"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},q),{},{pagination:{position:["none"],pageSize:I.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ce,{ref:w,list:R,parentId:t}),(0,u.jsx)(de,{ref:U})]})}function oe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var ce=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],w=j[1],D=function(e){Z((0,x.Z)((0,x.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),Z(e?{_id:e}:{parentId:i,isTop:!1})}}}));var T=function(){w(!0),re.save(f).then((function(e){M(e.message),D((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),re.details(f._id).then((function(e){Z(e.data||{})})).catch((function(e){M(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||D({slug:le.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" Category",style:{top:20},open:s,okText:"Save",onOk:T,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:T,children:"save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:f.name,onChange:function(e){D({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"is Top",required:!0,children:(0,u.jsxs)(C.Z,{value:f.isTop,onChange:function(e){D({isTop:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:f.status,onChange:function(e){D({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),de=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,p.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Data of \xa0",(0,u.jsx)("span",{style:{color:"red"},children:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:null,children:(0,u.jsx)(se,{parentId:c._id})})})})),ue=n(3721),he=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"bannerDetails",value:function(e,t){return L.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"bannerList",value:function(e){return L.Z.get(this.baseURL+"/list",{params:e})}},{key:"bannerSave",value:function(e,t){return L.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"bannerDelete",value:function(e){return L.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();he.baseURL="banner";var fe=n(4165),xe=n(5861),pe=n(5518),Ze=n(5963),me=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"get",value:function(e){return L.Z.get("../"+e)}},{key:"save",value:function(e,t){return L.Z.post(this.baseURL+"/save",e,t)}},{key:"remove",value:function(e){return L.Z.post(this.baseURL+"/remove",e)}}]),e}();me.baseURL="file";var je=function(e){var t=e.fileList,n=e.setFileList,a=e.count,i=void 0===a?1:a,r=e.cropImage,l=void 0===r?null:r,s=e.disabled,o=void 0!==s&&s,c=e.listType,d=void 0===c?"picture-card":c,h=function(){var e=(0,xe.Z)((0,fe.Z)().mark((function e(a){var i,r,l,s,o,c;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.onSuccess,r=a.onError,l=a.file,s=a.onProgress,o=new FormData,c={onUploadProgress:function(e){s({percent:e.loaded/e.total*100})}},o.append("file",l);try{me.save(o,c).then((function(e){i("Ok"),n([].concat((0,J.Z)(t),[{uid:e.data.uid,url:e.data.url,name:e.data.name}]))}))}catch(d){r({err:d})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.file;var t=e.fl;typeof t!==typeof[]&&(t=[]),n(t)},x=function(e){me.remove({uid:e.uid}).then((function(e){}))};return l?(typeof l!==typeof{}&&(l={}),l.aspect=l.aspect||1,l.shape=l.shape||"rect",l.quality=l.quality||1,(0,u.jsx)(Ze.Z,{rotate:!0,aspect:!0,shape:l.shape,quality:l.quality,children:(0,u.jsx)(pe.Z,{accept:"image/*",customRequest:h,onChange:f,onRemove:x,listType:d,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:(0,u.jsx)("div",{children:"Upload"})})})):(0,u.jsx)(pe.Z,{accept:"image/*",customRequest:h,onChange:f,onRemove:x,listType:d,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:(0,u.jsx)("div",{children:"Upload"})})};function ge(){var e=(0,a.useState)([]),t=(0,p.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,p.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20,fileType:"photo"}),b=(0,p.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Image",dataIndex:"imgUrl",width:100,render:function(e){return(0,u.jsx)(ue.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}},{title:"Uploaded At",dataIndex:"createdAt",width:100,render:function(e){return E()(e).format("dddd, MMMM Do YYYY, h:mm:ss a")}},{title:"Type",dataIndex:"type",width:80,render:function(e,t){return(0,u.jsx)("span",{children:t.type})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this image?. Be sure to delete the image from server.",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){I.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function w(){o(!0),he.bannerList(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),S((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var U=function(e){he.bannerDelete(e).then((function(e){M(e.message),w(),v([])})).catch((function(e){M(e.message,"error")}))},_=k.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));_[0].fixed=!0,_[_.length-1].fixed="right";var R={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(ve,{addNewModalRef:I,selected:f,deleteData:U,qData:C,setQData:S,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Banners"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},R),{},{pagination:{position:["none"],pageSize:C.limit},columns:_,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ye,{ref:I,list:w})]})}function ve(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=(e.qData,e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:i,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0}})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var ye=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,p.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)({aspect:1}),c=(0,p.Z)(o,2),h=c[0],f=c[1],Z=(0,a.useState)(!1),m=(0,p.Z)(Z,2),j=m[0],g=m[1],w=(0,a.useState)([]),D=(0,p.Z)(w,2),T=D[0],U=D[1],R=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),f((0,x.Z)({},h))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),f(e?{_id:e}:{fileType:"photo"})}}}));var A=function(){g(!0),he.bannerSave(h).then((function(e){M(e.message),R((0,x.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){g(!1)}))};return(0,a.useEffect)((function(){h._id&&(g(!0),he.bannerDetails(h._id).then((function(e){var t,n;f(e.data||{}),U(null!==(t=e.data)&&void 0!==t&&t.imgUrl?[null===(n=e.data)||void 0===n?void 0:n.imgUrl]:[])})).catch((function(e){M(e.message,"error")})).finally((function(){g(!1)})))}),[h._id]),(0,a.useEffect)((function(){l?U([]):f({_id:null})}),[l]),(0,a.useEffect)((function(){R({imgUrl:null===T||void 0===T?void 0:T[0]})}),[T]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(h._id?"Edit":"Add")+" Banner",style:{top:20},open:l,okText:"Save",onOk:A,okButtonProps:{disabled:j},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:j,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:T,setFileList:U,count:1,listType:"picture"})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Priority",children:(0,u.jsx)(k.Z,{placeholder:"Priority",value:h.priority,onChange:function(e){R({priority:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsx)(C.Z,{value:h.type,onChange:function(e){R({type:e})},children:(0,u.jsx)(C.Z.Option,{value:"home",children:"Home"})})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:h.status,onChange:function(e){R({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),be=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailUser",value:function(e,t){return L.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return L.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return L.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return L.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Ce(e){var t=e.productId,n=(0,a.useState)([]),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,p.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),Z=(0,p.Z)(f,2),v=Z[0],y=Z[1],b=(0,a.useState)({page:1,limit:20,productId:t}),C=(0,p.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),U=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Category",dataIndex:"cateId",width:100},{title:"Color",dataIndex:"color",width:100},{title:"Inventory",dataIndex:"inventory",width:100},{title:"Strile",dataIndex:"strile",width:100},{title:"Total",dataIndex:"total",width:100},{title:"Unit",dataIndex:"unite",width:100},{title:"Volume",dataIndex:"volume"},{title:"Price",dataIndex:"price",width:100},{title:"Kilo-Gram",dataIndex:"kg",width:100},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){R(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function _(){h(!0),be.listUser(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),I((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var R=function(e){be.deleteUser(e).then((function(e){M(e.message),_(),y([])})).catch((function(e){M(e.message,"error")}))},A=U.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var L={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Se,{addNewModalRef:k,selected:v,deleteData:R,qData:S,setQData:I,list:_})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){_()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Varient"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},L),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ie,{ref:k,list:_,productId:t}),(0,u.jsx)(ke,{ref:w,list:_})]})}function Se(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}be.baseURL="ecommerce/variant/";var Ie=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.productId,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],C=j[1],w=function(e){Z((0,x.Z)((0,x.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{productId:i})}}}));var D=function(){C(!0),be.saveUser(f).then((function(e){M(e.message),w((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){C(!1)}))};return(0,a.useEffect)((function(){f._id&&(C(!0),be.detailUser(f._id).then((function(e){Z(e.data||{})})).catch((function(e){M(e.message,"error")})).finally((function(){C(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:le.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" Varient",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsxs)(b.Z,{span:24,children:[(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Category",value:f.cateId,onChange:function(e){w({cateId:e.target.value})}})}),(0,u.jsx)(v.Z.Item,{label:"Price",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"price",value:f.price,onChange:function(e){w({price:e.target.value})}})})]}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){w({slug:le.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Color",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Color",value:f.color,onChange:function(e){w({color:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Kilo-Gram",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Kilo-Gram",value:f.kg,onChange:function(e){w({kg:e.target.value})}})})})]})})})})})})),ke=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,p.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})})),we=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailUser",value:function(e,t){return L.Z.get(this.baseURL+"/details-user/"+e,{params:t})}},{key:"listUser",value:function(e){return L.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e,t){return L.Z.post(this.baseURL+"/save-user",e,{params:t})}},{key:"deleteUser",value:function(e){return L.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();we.baseURL="user";var De=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailJob",value:function(e,t){return L.Z.get(this.baseURL+"/address/details"+e,{params:t})}},{key:"listJob",value:function(e){return L.Z.get(this.baseURL+"/address/list",{params:e})}},{key:"saveJob",value:function(e,t){return L.Z.post(this.baseURL+"/address/save",e,{params:t})}},{key:"deleteJob",value:function(e){return L.Z.post(this.baseURL+"/address/delete",{ids:e})}}]),e}();function Te(e){var t=e.userId,n=(0,a.useState)([]),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,p.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),Z=(0,p.Z)(f,2),v=Z[0],y=Z[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,p.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),U=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"City",dataIndex:"city"},{title:"Pin",dataIndex:"pin"},{title:"State",dataIndex:"state"},{title:"Street 1",dataIndex:"street1"},{title:"Street 2",dataIndex:"street2"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){R(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function _(){h(!0),De.listJob(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),I((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var R=function(e){De.deleteJob(e).then((function(e){M(e.message),_(),y([])})).catch((function(e){M(e.message,"error")}))},A=U.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var L={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Ue,{addNewModalRef:k,selected:v,deleteData:R,qData:S,setQData:I,list:_})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){_()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},L),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(_e,{ref:k,list:_,userId:t}),(0,u.jsx)(Re,{ref:w,list:_})]})}function Ue(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}De.baseURL="user";var _e=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],C=j[1],w=function(e){Z((0,x.Z)((0,x.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),Z(e?(0,x.Z)({},e):{userId:i})}}}));var D=function(){C(!0),De.saveJob(f).then((function(e){M(e.message),w((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){C(!1)}))};return(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:le.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"City",value:f.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Pin",value:f.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"State",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"State",value:f.state,onChange:function(e){w({state:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 1",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Street 1",value:f.street1,onChange:function(e){w({street1:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 2",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Street 2",value:f.street2,onChange:function(e){w({street2:e.target.value})}})})})]})})})})})})),Re=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,p.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Te,{productId:c._id})})})}));function Ae(e){var t=e.userId,n=(0,a.useState)([]),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,p.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,p.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,userId:t}),S=(0,p.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),U=(0,a.useRef)(),_=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Username",dataIndex:"name",width:150},{title:"Phone",dataIndex:"phone",width:100},{title:"Email",dataIndex:"email",width:200},{title:"Job",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){U.current.openForm({_id:t._id,name:t.name})},children:"Address"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return"blocked"===e?(0,u.jsx)(Z.Z,{color:"red",children:"Blocked"}):"active"===e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"yellow",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){A(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),we.listUser(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),k((0,x.Z)((0,x.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var A=function(e){we.deleteUser(e).then((function(e){M(e.message),R(),b([])})).catch((function(e){M(e.message,"error")}))},L=_.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var q={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Le,{addNewModalRef:w,selected:y,deleteData:A,qData:I,setQData:k,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},q),{},{pagination:{position:["none"],pageSize:I.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(qe,{ref:w,list:R,userId:t}),(0,u.jsx)(Fe,{ref:U})]})}function Le(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsxs)(C.Z,{value:i.status,allowClear:!0,placeholder:"Search By Status",onChange:function(e){r((0,x.Z)((0,x.Z)({},i),{},{status:e}))},children:[(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(C.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(C.Z.Option,{value:"blocked",children:"Blocked"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var qe=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,p.Z)(D,2),U=T[0],R=T[1],A=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,x.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{userId:i})}}}));var L=function(){w(!0),we.saveUser(f).then((function(e){M(e.message),A((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),we.detailUser(f._id).then((function(e){var t,n;Z(e.data||{}),R(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){M(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?R([]):Z({_id:null})}),[s]),(0,a.useEffect)((function(){A({avatar:null===U||void 0===U?void 0:U[0]})}),[U]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:L,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:L,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:20,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Username",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"John Doe",value:f.name,onChange:function(e){A({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Email",value:f.email,onChange:function(e){A({email:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Phone",value:f.phone,onChange:function(e){A({phone:e.target.value})}})})})]})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Avatar",children:(0,u.jsx)(je,{fileList:U,setFileList:R,count:1})})}),(0,u.jsx)(b.Z,{span:10,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:f.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(C.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(C.Z.Option,{value:"blocked",children:"Blocked"})]})})})]})})})})})})),Fe=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,p.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,x.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Job List of ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Te,{userId:c._id})})})})),Ne=n(7128),Oe=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailProduct",value:function(e,t){return L.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listProduct",value:function(e){return L.Z.get(this.baseURL+"list",{params:e})}},{key:"saveProduct",value:function(e,t){return L.Z.post(this.baseURL+"save",e,{params:t})}},{key:"detailUser",value:function(e,t){return L.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return L.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return L.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return L.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Pe(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,p.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,p.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)([]),S=(0,p.Z)(C,2),I=S[0],k=S[1],w=(0,a.useState)({page:1,limit:20,parentId:t}),U=(0,p.Z)(w,2),_=U[0],R=U[1],A=(0,a.useRef)(),L=(0,a.useRef)(),q=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Description",dataIndex:"description",width:400,render:function(e){return(0,u.jsx)(j.Z.Text,{ellipsis:{expandable:!0},children:e})}},{title:"Meta-Title",dataIndex:"metaTitle",width:100},{title:"Meta-Tag",dataIndex:"metaTag",width:100},{title:"Meta-Description",dataIndex:"metaDescription",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){N(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){A.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function F(){h(!0),Oe.listUser(_).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),R((0,x.Z)((0,x.Z)({},_),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var N=function(e){Oe.deleteUser(e).then((function(e){M(e.message),F(),b([])})).catch((function(e){M(e.message,"error")}))},P=q.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));P[0].fixed=!0,P[P.length-1].fixed="right";var E={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Ee,{addNewModalRef:A,selected:y,deleteData:N,qData:_,setQData:R,list:F})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:_,setQData:R})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){F(),re.list().then((function(e){k(e.data||[])})).catch((function(e){M("Product data not loaded","error")}))}),[_.page,_.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},E),{},{pagination:{position:["none"],pageSize:_.limit},columns:P,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Be,{ref:A,list:F,parentId:t,category:I}),(0,u.jsx)(Me,{ref:L,list:F})]})}function Ee(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Oe.baseURL="ecommerce/product/";var Be=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=e.category,l=(0,a.useState)(!1),s=(0,p.Z)(l,2),o=s[0],c=s[1],h=(0,a.useState)({aspect:1}),f=(0,p.Z)(h,2),Z=f[0],m=f[1],j=(0,a.useState)(!1),g=(0,p.Z)(j,2),w=g[0],D=g[1],T=(0,a.useState)([]),U=(0,p.Z)(T,2),R=U[0],A=U[1],L=(0,a.useState)([]),q=(0,p.Z)(L,2),F=q[0],N=q[1],O=function(e,t){for(var n=Z,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);m((0,x.Z)({},Z))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){c(!0),m(e?{_id:e}:{parentId:i,isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}]})}}})),console.log(Z);var P=function(){D(!0),Oe.saveUser(Z).then((function(e){M(e.message),O((0,x.Z)({},e.data)),n(),c(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){Z._id&&(D(!0),Oe.detailUser(Z._id).then((function(e){m(e.data||{}),N(e.data.imgs.length?(0,J.Z)(e.data.imgs):[]),A(e.data.thumbImg?[e.data.thumbImg]:[])})).catch((function(e){M(e.message,"error")})).finally((function(){D(!1)})))}),[Z._id]),(0,a.useEffect)((function(){Z._id||O(le.Z.removeSpecialChars(Z.name||""),"slug")}),[Z.name]),(0,a.useEffect)((function(){Z._id||O(le.Z.removeSpecialChars((null===Z||void 0===Z?void 0:Z.name)||""),"slug")}),[Z.name]),(0,a.useEffect)((function(){m((0,x.Z)((0,x.Z)({},Z),{},{thumbImg:R[0]}))}),[R]),(0,a.useEffect)((function(){m((0,x.Z)((0,x.Z)({},Z),{},{imgs:F}))}),[F]),(0,a.useEffect)((function(){o||m({})}),[o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(Z._id?"Edit":"Add New")+" Product",style:{top:20},open:o,okText:"Save",onOk:P,okButtonProps:{disabled:w},onCancel:function(){c(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){c(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:P,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:w,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:Z.name,onChange:function(e){O(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Slug",value:Z.slug,onChange:function(e){O(le.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(k.Z.TextArea,{rows:4,placeholder:"Description",value:Z.description,onChange:function(e){O(le.Z.removeSpecialChars(e.target.value),"description")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Meta-Title",value:Z.metaTitle,onChange:function(e){O(e.target.value,"metaTitle")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",value:Z.categoryIds,onChange:function(e){O(e,"categoryIds")},options:r.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Tag",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Meta-Tag",value:Z.metaTag,onChange:function(e){O(e.target.value,"metaTag")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Description",required:!0,children:(0,u.jsx)(k.Z.TextArea,{rows:4,placeholder:"Meta-Description",value:Z.metaDescription,onChange:function(e){O(e.target.value,"metaDescription")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"High-Light",required:!0,children:(0,u.jsx)(k.Z.TextArea,{rows:4,placeholder:"High-Light...",value:Z.heighlight,onChange:function(e){O(e.target.value,"heighlight")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Premium",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.isPremium,onChange:function(e){O(e,"isPremium")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Best Selling",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.isBestSelling,onChange:function(e){O(e,"isBestSelling")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Best Selling Combos",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.isBestSellingCombos,onChange:function(e){O(e,"isBestSellingCombos")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"BirthDay",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.forBirthday,onChange:function(e){O(e,"forBirthday")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Anniversary",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.forAnniversary,onChange:function(e){O(e,"forAnniversary")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:Z.status,onChange:function(e){O(e,"status")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(ze,{variantDetails:Z.variants,parentKay:"variants",handleChange:O})}),(0,u.jsx)(Ne.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(je,{fileList:R,setFileList:A})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:F,setFileList:N,count:20})})})]})})})})})})),Me=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,p.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,p.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:c._id?"Variants of ".concat(c.name):"Add User of ".concat(c.name),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})}));function ze(e){var t=e.variantDetails,n=e.parentKay,i=e.handleChange;return(0,a.useEffect)((function(){console.log(n,"variants"===n)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(Ne.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"})}),(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Weight"})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Price"})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)("label",{className:"req",children:"Actual Price (In \u20b9)"})})]}),null===t||void 0===t?void 0:t.map((function(e,r){return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(k.Z,{placeholder:"Weight",value:e.weight,onChange:function(e){i(e.target.value,"".concat(n,".").concat(r,".weight"))}})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(k.Z,{placeholder:"Price",value:e.price,onChange:function(e){i(le.Z.handleInteger(e.target.value),"".concat(n,".").concat(r,".price"))}})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(k.Z,{placeholder:"Actual Price",value:e.actualPrice,onChange:function(e){i(le.Z.handleFloat(e.target.value),"".concat(n,".").concat(r,".actualPrice"))}})}),(0,u.jsxs)(b.Z,{span:8,children:[r+1===t.length?(0,u.jsx)(d.Z,{type:"dashed",onClick:function(){i([].concat((0,J.Z)(t),[{}]),n)},children:"Add"}):null,r+1===t.length&&0!==r?(0,u.jsx)(d.Z,{type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),i((0,J.Z)(t),n)},children:"Remove"}):null]})]})},r)}))]})}var Ye=function(){function e(){(0,R.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return L.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return L.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return L.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return L.Z.get(this.baseURL+"/details/"+e)}}]),e}();function Ve(){var e=(0,a.useState)([]),t=(0,p.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,p.Z)(c,2),f=h[0],Z=h[1],v=(0,a.useState)({page:1,limit:20}),y=(0,p.Z)(v,2),b=y[0],C=y[1],S=(0,a.useState)([]),I=(0,p.Z)(S,2),k=I[0],w=I[1],U=(0,a.useState)([]),_=(0,p.Z)(U,2),R=_[0],A=_[1],L=(0,a.useRef)(),q=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title",width:150},{title:"Discount Percent",dataIndex:"discountPercent",width:100},{title:"Max Discount",dataIndex:"maxDiscountValue",width:100},{title:"Min Order Price",dataIndex:"minimunOrderPrice",width:100},{title:"Duration",dataIndex:"startDate",width:200,render:function(e,t){return(0,u.jsxs)("span",{children:[E()(e).format("DD MMM YYYY")," To ",E()(t.endDate).format("DD MMM YYYY")," "]})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){P(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){L.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function N(){o(!0),Ye.list(b).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)({key:e._id},e)})).reverse()),C((0,x.Z)((0,x.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var P=function(e){Ye.delete(e).then((function(e){M(e.message),N(),Z([])})).catch((function(e){M(e.message,"error")}))},B=q.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));B[0].fixed=!0,B[B.length-1].fixed="right";var z={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(He,{addNewModalRef:L,selected:f,deleteData:P,qData:b,setQData:C,list:N})},showHeader:!0,footer:function(){return(0,u.jsx)(O,{qData:b,setQData:C})},rowSelection:{onChange:function(e){Z(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){N(),Oe.listUser().then((function(e){w(e.data||[])})).catch((function(e){M("Product data not loaded","error")})),F.listUser().then((function(e){A(e.data||[])})).catch((function(e){M("User data not loaded","error")}))}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Offer"}),(0,u.jsx)(g.Z,(0,x.Z)((0,x.Z)({},z),{},{pagination:{position:["none"],pageSize:b.limit},columns:B,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Qe,{ref:L,list:N,product:k,user:R})]})}function He(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(U.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Ye.baseURL="offer";var Qe=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.product,r=(0,a.useState)(!1),l=(0,p.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,p.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,p.Z)(m,2),g=j[0],D=j[1],T=(0,a.useState)([]),U=(0,p.Z)(T,2),R=U[0],A=U[1],L=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,x.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{fileType:"photo"})}}}));var q=function(){D(!0),Ye.save(f).then((function(e){M(e.message),L((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?M(e.message[Object.keys(e.message)[0]],"error"):M(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){f._id&&(D(!0),Ye.details(f._id).then((function(e){Z(e.data||{}),A(e.data.imgs.length?(0,J.Z)(e.data.imgs):[])})).catch((function(e){M(e.message,"error")})).finally((function(){D(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){console.log("data",f)}),[f]),(0,a.useEffect)((function(){Z((0,x.Z)((0,x.Z)({},f),{},{imgs:R}))}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{title:(f._id?"Edit":"Add")+" Offer",style:{top:20},open:s,okText:"Save",onOk:q,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:q,children:"Save"},"save")],children:(0,u.jsx)(I.Z,{spinning:g,indicator:(0,u.jsx)(_.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Title",value:f.title,onChange:function(e){L({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Discount Percent",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Discount Percent",value:f.discountPercent,onChange:function(e){L({discountPercent:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Max Discount Value",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Max Discount Amount",value:f.maxDiscountValue,onChange:function(e){L({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(k.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){L({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Product",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",value:f.productIds,onChange:function(e){L({productIds:e})},options:i.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Duration",required:!0,children:(0,u.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",value:f.startDate&&f.endDate&&[Y()(f.startDate),Y()(f.endDate)],onChange:function(e){L({startDate:null!==e&&void 0!==e&&e[0]?new Date(null===e||void 0===e?void 0:e[0]):null,endDate:null!==e&&void 0!==e&&e[1]?new Date(null===e||void 0===e?void 0:e[1]):null})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:R,setFileList:A,count:20})})})]})})})})})}));function Je(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(i.Z,{className:"site-layout",children:[(0,u.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(r.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(s.rU,{to:"/offer",children:"Offers  "}),key:"offer"},{label:(0,u.jsx)(s.rU,{to:"/coupon",children:"Coupon"}),key:"coupon"},{label:(0,u.jsx)(s.rU,{to:"/banner",children:"Banner"}),key:"banner"},{label:(0,u.jsx)(s.rU,{to:"/add-new-product",children:"Add New Product"}),key:"add-new-product"},{label:(0,u.jsx)(s.rU,{to:"/category",children:"Category"}),key:"category"},{label:(0,u.jsx)(s.rU,{to:"/application",children:"Application"}),key:"application"},{label:(0,u.jsx)(s.rU,{to:"/management",children:"User Management"}),key:"management"},{label:null!==f.Z&&void 0!==f.Z&&f.Z.name?f.Z.name:"You",key:"profile",children:[{key:"Profile",label:"Profile"},{key:"Logout",danger:!0,label:"Logout",onClick:function(){window.localStorage.clear(),window.location.reload()}}]}]})}),(0,u.jsx)(i.Z.Content,{children:(0,u.jsx)(l.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(o.Z5,{children:[(0,u.jsx)(o.AW,{path:"offer",element:(0,u.jsx)(Ve,{}),children:"  "}),(0,u.jsx)(o.AW,{path:"coupon",element:(0,u.jsx)(V,{}),children:" "}),(0,u.jsx)(o.AW,{path:"banner",element:(0,u.jsx)(ge,{})}),(0,u.jsx)(o.AW,{path:"application",element:(0,u.jsx)($,{})}),(0,u.jsx)(o.AW,{path:"category",element:(0,u.jsx)(se,{})}),(0,u.jsx)(o.AW,{path:"management",element:(0,u.jsx)(Ae,{})}),(0,u.jsx)(o.AW,{path:"add-new-product",element:(0,u.jsx)(Pe,{})}),(0,u.jsx)(o.AW,{path:"*",element:(0,u.jsx)(h,{})})]})})})]})})})}}}]);
//# sourceMappingURL=288.8547d687.chunk.js.map