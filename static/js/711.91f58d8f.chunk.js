"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[711],{3711:function(e,t,n){n.r(t),n.d(t,{default:function(){return Dt}});var a=n(2791),i=n(586),r=n(3388),l=n(7888),s=n(1087),o=n(7689),c=n(8935),d=n(7309),u=n(184);function h(){return(0,u.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(s.rU,{to:"/",children:(0,u.jsx)(d.Z,{type:"primary",children:"Back Home"})})})}var f=n(7063),p=n(1413),x=n(9439),Z=n(2339),m=n(5820),j=n(8302),g=n(4260),v=n(7615),y=n(6106),b=n(914),C=n(9389),S=n(458),I=n(9998),k=n(43),w=n(1717),D=n(2622),T=n(1752),_=n(9286),R=n(7106),O=n(5671),A=n(3144),U=n(7205),q=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return U.Z.get("coupon/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post("coupon/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post("coupon/delete",{ids:e})}},{key:"details",value:function(e){return U.Z.get("coupon/details/"+e)}}]),e}();q.baseURL="";var N=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"listUser",value:function(e){return U.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e){return U.Z.post(this.baseURL+"/save-user",e)}},{key:"deleteUser",value:function(e){return U.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();N.baseURL="user";var F=n(4099);function L(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(F.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(Z.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,p.Z)((0,p.Z)({},t),{},{page:1,limit:a})):n((0,p.Z)((0,p.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var P=n(2426),E=n.n(P),B=n(7027);function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&B.ZP.success(e),"error"===t&&B.ZP.error(e),"warning"===t&&B.ZP.warning(e))}var M=n(7892),Y=n.n(M),Q=n(151);function H(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useState)([]),k=(0,x.Z)(I,2),w=k[0],_=k[1],R=(0,a.useRef)(),O=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",width:150,dataIndex:"title"},{title:"Code",width:100,dataIndex:"code"},{title:"EndDate",width:100,dataIndex:"expiryDate",render:function(e,t){return(0,u.jsx)("span",{children:E()(e).format("DD MMM YYYY")})}},{title:"Discount Value",width:100,dataIndex:"discountValue"},{title:"Coupon Use",width:100,dataIndex:"typeOfUse"},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){R.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){o(!0),q.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var U=function(e){q.delete(e).then((function(e){z(e.message),A(),v([])})).catch((function(e){z(e.message,"error")}))},F=O.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));console.log(F),F[0].fixed=!0,F[F.length-1].fixed="right";var P={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(V,{addNewModalRef:R,selected:f,deleteData:U,qData:C,setQData:S,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A(),N.listUser().then((function(e){_(e.data||[])})).catch((function(e){z("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Coupon"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},P),{},{pagination:{position:["none"],pageSize:C.limit},columns:F,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(W,{ref:R,list:A,user:w})]})}function V(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsxs)(S.Z,{value:i.status,allowClear:!0,placeholder:"Search By Date",onChange:function(e){r((0,p.Z)((0,p.Z)({},i),{},{expiryDate:e}))},children:[(0,u.jsx)(S.Z.Option,{value:"expired",children:"Expired"}),(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var W=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.user,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),g=(0,x.Z)(m,2),D=g[0],T=g[1],_=(0,a.useState)([]),O=(0,x.Z)(_,2),A=(O[0],O[1]),U=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{fileType:"photo"})}}}));var N=function(){T(!0),q.save(f).then((function(e){z(e.message),U((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){T(!1)}))};return(0,a.useEffect)((function(){f._id&&(T(!0),q.details(f._id).then((function(e){var t,n;Z(e.data||{}),A(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){z(e.message,"error")})).finally((function(){T(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?A([]):Z({_id:null})}),[s]),(0,a.useEffect)((function(){var e;f._id||U({code:null===(e=Q.Z.removeSpecialChars(f.title))||void 0===e?void 0:e.toUpperCase()})}),[f.title]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Coupon",style:{top:20},open:s,okText:"Save",onOk:N,okButtonProps:{disabled:D},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:N,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:D,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.title,onChange:function(e){U({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Code",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Code",value:f.code,onChange:function(e){var t;U({code:null===(t=Q.Z.removeSpecialChars(e.target.value))||void 0===t?void 0:t.toUpperCase()})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Discount Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.discountType,onChange:function(e){U({discountType:e})},children:[(0,u.jsx)(S.Z.Option,{value:"percent",children:"Percent"}),(0,u.jsx)(S.Z.Option,{value:"flat",children:"Flat"})]})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"discountValue",value:f.discountValue,onChange:function(e){U({discountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Max Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Max DiscountValue",value:f.maxDiscountValue,onChange:function(e){U({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){U({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Use Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.typeOfUse,onChange:function(e){U({typeOfUse:e})},children:[(0,u.jsx)(S.Z.Option,{value:"Single",children:"Single Use"}),(0,u.jsx)(S.Z.Option,{value:"Multiple",children:"Multiple Use"})]})})}),(0,u.jsx)(b.Z,{span:18,children:(0,u.jsx)(v.Z.Item,{label:"Choose Users (Don't choose any user if coupon is applicable to all users)",children:(0,u.jsx)(S.Z,{mode:"multiple",value:f.userIds,onChange:function(e){U({userIds:e})},options:i.map((function(e){return{value:e._id,label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{style:{padding:"0px",margin:"0px"},children:null===e||void 0===e?void 0:e.name}),(0,u.jsx)("p",{style:{fontSize:"12px",margin:"0px"},children:(0,u.jsxs)(j.Z.Text,{type:"danger",children:["@",null===e||void 0===e?void 0:e.phone]})})]})}}))})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Expiry Date",required:!0,children:(0,u.jsx)(w.Z,{value:f.expiryDate&&Y()(E()(f.expiryDate).format("YYYY-MM-DD")),format:"DD MMM YYYY",disabledDate:function(e){return e.isBefore(E()(new Date).subtract(1,"day"))},onChange:function(e){U({expiryDate:new Date(e)})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"For First Order",children:(0,u.jsxs)(S.Z,{value:f.forFirst,defaultValue:!1,onChange:function(e){U({forFirst:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){U({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),J=n(3433),K=n(6002),G=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detail",value:function(e){return U.Z.get(this.baseURL+"/details/"+e.type,{params:e})}},{key:"list",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();G.baseURL="application";var X=n(9687);function $(e){var t=e.height,n=void 0===t?400:t,i=e.menubar,r=void 0!==i&&i,l=e.plugins,s=e.toolbar,o=e.content_style,c=e.initialValue,d=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor","image paste table code"]),s||(s="undo redo | formatselect | bold italic backcolor | forecolor emoticons| table tabledelete | tableprops tablerowprops tablecellprops| alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help | image link | imageupload | code | fullscreen"),o||(o="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var h=(0,a.useRef)(null);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(X.M,{onInit:function(e,t){return h.current=t},initialValue:c,init:{height:n,menubar:r,plugins:l,toolbar:s,content_style:o,file_browser_callback_types:"image",file_picker_callback:function(e,t,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result,{title:t.name})}},a.click()},deprecation_warnings:!1},onSelectionChange:function(){h.current&&d(h.current.getContent())}})})}function ee(){var e=(0,a.useState)({aspect:1}),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),s=(0,x.Z)(r,2),o=s[0],c=s[1],h=(0,a.useState)(0),f=(0,x.Z)(h,2),Z=f[0],m=f[1],j=function(e,t){t&&(Object.entries(e).forEach((function(e){for(var t=n,a=e[0],i=e[1],r=a.split("."),l=0;l<r.length;l++)l+1===r.length?t[r[l]]=i:("undefined"===typeof t[r[l]]&&(1*parseInt(r[l+1])>=0?t[r[l]]=[]:t[r[l]]={}),t=t[r[l]])})),i((0,p.Z)({},n)))},g=function(){c(!0);try{(0===Z?G.save((0,p.Z)((0,p.Z)({},n),{},{type:"aboutus",data:n.data})):1===Z?G.save((0,p.Z)((0,p.Z)({},n),{},{type:"termcondition",data:n.data})):2===Z?G.save((0,p.Z)((0,p.Z)({},n),{},{type:"faq",data:n.data})):3===Z?G.save((0,p.Z)((0,p.Z)({},n),{},{type:"contactus",data:n.data})):4===Z?G.save((0,p.Z)((0,p.Z)({},n),{},{type:"privacy-policy",data:n.data})):null).then((function(e){z(e.message),j((0,p.Z)({},e.data)),m((Z+1)%5)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){c(!1)}))}catch(e){z(e.message,"error")}},v=function(e){c(!0),G.detail(e).then((function(e){i(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){c(!1)}))};return(0,a.useEffect)((function(){0===Z?v({_id:n._id,type:"aboutus"}):1===Z?v({_id:n._id,type:"termcondition"}):2===Z?v({_id:n._id,type:"faq"}):3===Z?v({_id:n._id,type:"contactus"}):4===Z&&v({_id:n._id,type:"privacy-policy"})}),[Z]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(k.Z,{spinning:o,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(K.Z,{activeKey:Z,type:"card",size:"small",style:{marginBottom:0},onChange:function(e){m(e)},items:[{label:"About us",key:0,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(te,{data:n,handleChange:j,save:g})})},{label:"Terms & Condition",key:1,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ne,{data:n,handleChange:j,save:g})})},{label:"FAQ",key:2,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ae,{data:n,handleChange:j,save:g})})},{label:"Contact us",key:3,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ie,{data:n,handleChange:j,save:g})})},{label:"Privacy Policy",key:4,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(re,{data:n,handleChange:j,save:g})})}]}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingTop:"5px",paddingRight:"70px"},children:(0,u.jsx)(d.Z,{type:"primary",onClick:g,children:4===Z?"Save":"Next"},"save")})]})})}var te=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)($,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},ne=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)($,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},ae=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)($,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},ie=function(e){var t,n=e.data,i=e.handleChange,r=(0,a.useState)("This is an editable text."),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([1]),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)([1]),g=(0,x.Z)(m,2),S=g[0],I=g[1];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],style:{width:"100%",padding:"0 5px"},children:[(0,u.jsxs)(b.Z,{xs:24,xl:6,children:[f.map((function(){return(0,u.jsx)(v.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(j.Z.Paragraph,{style:{marginTop:"8px"},editable:{onChange:o},children:s})})})),(0,u.jsx)(d.Z,{onClick:function(){return Z((function(e){return[].concat((0,J.Z)(e),[1])}))},children:"Add"})]}),(0,u.jsxs)(b.Z,{xs:24,xl:6,children:[S.map((function(){return(0,u.jsx)(v.Z.Item,{label:"Phone Number",required:!0,children:(0,u.jsx)(j.Z.Paragraph,{style:{marginTop:"8px"},editable:{onChange:o},children:s})})})),(0,u.jsx)(d.Z,{onClick:function(){return I((function(e){return[].concat((0,J.Z)(e),[1])}))},children:"Add"})]}),(0,u.jsx)(b.Z,{xs:24,xl:12,children:(0,u.jsx)(v.Z.Item,{label:"Address",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street No: 9, Delhi: 110054",value:null===(t=n.data)||void 0===t?void 0:t.address,onChange:function(e){i({data:(0,p.Z)((0,p.Z)({},n.data),{},{address:e.target.value})})}})})})]})})})},re=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)($,{initialValue:t.data,onChange:function(e){t.data=e}})})})})})})},le=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return U.Z.get(this.baseURL+"category/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post(this.baseURL+"category/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post(this.baseURL+"category/delete",{ids:e})}},{key:"details",value:function(e){return U.Z.get(this.baseURL+"category/details/"+e)}}]),e}();function se(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,parentId:t}),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),_=(0,a.useRef)(),R=[{title:"#",width:25,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:200},{title:"Lable",dataIndex:"lable",width:100,render:function(e,t){return(0,u.jsx)(d.Z,{onClick:function(){_.current.openForm(t)},children:" Detail"})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){A(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function O(){h(!0),le.list(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),k((0,p.Z)((0,p.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var A=function(e){le.delete(e).then((function(e){z(e.message),O(),b([])})).catch((function(e){z(e.message,"error")}))},U=R.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));U[0].fixed=!0,U[U.length-1].fixed="right";var q={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(oe,{addNewModalRef:w,selected:y,deleteData:A,qData:I,setQData:k,list:O})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){O()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Category"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},q),{},{pagination:{position:["none"],pageSize:I.limit},columns:U,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ce,{ref:w,list:O,parentId:t}),(0,u.jsx)(de,{ref:_})]})}function oe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}le.baseURL="/ecommerce/";var ce=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],w=j[1],D=function(e){Z((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),Z(e?{_id:e}:{parentId:i,isTop:!1})}}}));var T=function(){w(!0),le.save(f).then((function(e){z(e.message),D((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),le.details(f._id).then((function(e){Z(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||D({slug:Q.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Category",style:{top:20},open:s,okText:"Save",onOk:T,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:T,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:f.name,onChange:function(e){D({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"is Top",required:!0,children:(0,u.jsxs)(S.Z,{value:f.isTop,onChange:function(e){D({isTop:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){D({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),de=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Data of \xa0",(0,u.jsx)("span",{style:{color:"red"},children:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:null,children:(0,u.jsx)(se,{parentId:c._id})})})})),ue=n(3721),he=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"bannerDetails",value:function(e,t){return U.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"bannerList",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"bannerSave",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"bannerDelete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();he.baseURL="banner";var fe=n(4165),pe=n(5861),xe=n(5518),Ze=n(5963),me=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"get",value:function(e){return U.Z.get("../"+e)}},{key:"save",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,t)}},{key:"remove",value:function(e){return U.Z.post(this.baseURL+"/remove",e)}}]),e}();me.baseURL="file";var je=function(e){var t=e.fileList,n=e.setFileList,a=e.count,i=void 0===a?1:a,r=e.cropImage,l=void 0===r?null:r,s=e.disabled,o=void 0!==s&&s,c=e.listType,d=void 0===c?"picture-card":c,h=function(){var e=(0,pe.Z)((0,fe.Z)().mark((function e(a){var i,r,l,s,o,c;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.onSuccess,r=a.onError,l=a.file,s=a.onProgress,o=new FormData,c={onUploadProgress:function(e){s({percent:e.loaded/e.total*100})}},o.append("file",l);try{me.save(o,c).then((function(e){i("Ok"),n([].concat((0,J.Z)(t),[{uid:e.data.uid,url:e.data.url,name:e.data.name}]))}))}catch(d){r({err:d})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.file;var t=e.fl;typeof t!==typeof[]&&(t=[]),n(t)},p=function(e){me.remove({uid:e.uid}).then((function(e){}))};return l?(typeof l!==typeof{}&&(l={}),l.aspect=l.aspect||1,l.shape=l.shape||"rect",l.quality=l.quality||1,(0,u.jsx)(Ze.Z,{rotate:!0,aspect:!0,shape:l.shape,quality:l.quality,children:(0,u.jsx)(xe.Z,{accept:"image/*",customRequest:h,onChange:f,onRemove:p,listType:d,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:(0,u.jsx)("div",{children:"Upload"})})})):(0,u.jsx)(xe.Z,{accept:"image/*",customRequest:h,onChange:f,onRemove:p,listType:d,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:(0,u.jsx)("div",{children:"Upload"})})};function ge(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],Z=h[1],v=(0,a.useState)({page:1,limit:20,fileType:"photo"}),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useRef)(),I=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Image",dataIndex:"image",width:100,render:function(e){return(0,u.jsx)(ue.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}},{title:"Uploaded At",dataIndex:"createdAt",width:100,render:function(e){return E()(e).format("dddd, MMMM Do YYYY, h:mm:ss a")}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this image?. Be sure to delete the image from server.",onConfirm:function(){w(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){S.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function k(){o(!0),he.bannerList(b).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),C((0,p.Z)((0,p.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var w=function(e){he.bannerDelete(e).then((function(e){z(e.message),k(),Z([])})).catch((function(e){z(e.message,"error")}))},_=I.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));_[0].fixed=!0,_[_.length-1].fixed="right";var R={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(ve,{addNewModalRef:S,selected:f,deleteData:w,qData:b,setQData:C,list:k})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:b,setQData:C})},rowSelection:{onChange:function(e){Z(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){k()}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Banners"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},R),{},{pagination:{position:["none"],pageSize:b.limit},columns:_,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ye,{ref:S,list:k})]})}function ve(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=(e.qData,e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:i,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0}})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var ye=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,x.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)({aspect:1}),c=(0,x.Z)(o,2),h=c[0],f=c[1],Z=(0,a.useState)(!1),m=(0,x.Z)(Z,2),j=m[0],g=m[1],C=(0,a.useState)([]),S=(0,x.Z)(C,2),w=S[0],D=S[1],T=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),f((0,p.Z)({},h))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),f(e?{_id:e}:{fileType:"photo"})}}}));var _=function(){g(!0),he.bannerSave(h).then((function(e){z(e.message),T((0,p.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){g(!1)}))};return(0,a.useEffect)((function(){h._id&&(g(!0),he.bannerDetails(h._id).then((function(e){var t,n;f(e.data||{}),D(null!==(t=e.data)&&void 0!==t&&t.image?[null===(n=e.data)||void 0===n?void 0:n.image]:[])})).catch((function(e){z(e.message,"error")})).finally((function(){g(!1)})))}),[h._id]),(0,a.useEffect)((function(){l?D([]):f({_id:null})}),[l]),(0,a.useEffect)((function(){T({image:null===w||void 0===w?void 0:w[0]})}),[w]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(h._id?"Edit":"Add")+" Banner",style:{top:20},open:l,okText:"Save",onOk:_,okButtonProps:{disabled:j},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:_,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:j,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:w,setFileList:D,count:1})})})})})})})})})),be=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailUser",value:function(e,t){return U.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return U.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return U.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return U.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Ce(e){var t=e.productId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),Z=(0,x.Z)(f,2),v=Z[0],y=Z[1],b=(0,a.useState)({page:1,limit:20,productId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),_=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Category",dataIndex:"cateId",width:100},{title:"Color",dataIndex:"color",width:100},{title:"Inventory",dataIndex:"inventory",width:100},{title:"Strile",dataIndex:"strile",width:100},{title:"Total",dataIndex:"total",width:100},{title:"Unit",dataIndex:"unite",width:100},{title:"Volume",dataIndex:"volume"},{title:"Price",dataIndex:"price",width:100},{title:"Kilo-Gram",dataIndex:"kg",width:100},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){O(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),be.listUser(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var O=function(e){be.deleteUser(e).then((function(e){z(e.message),R(),y([])})).catch((function(e){z(e.message,"error")}))},A=_.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var U={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Se,{addNewModalRef:k,selected:v,deleteData:O,qData:S,setQData:I,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Varient"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},U),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ie,{ref:k,list:R,productId:t}),(0,u.jsx)(ke,{ref:w,list:R})]})}function Se(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}be.baseURL="ecommerce/variant/";var Ie=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.productId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],S=j[1],w=function(e){Z((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{productId:i})}}}));var D=function(){S(!0),be.saveUser(f).then((function(e){z(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){f._id&&(S(!0),be.detailUser(f._id).then((function(e){Z(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){S(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:Q.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Varient",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsxs)(b.Z,{span:24,children:[(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Category",value:f.cateId,onChange:function(e){w({cateId:e.target.value})}})}),(0,u.jsx)(v.Z.Item,{label:"Price",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"price",value:f.price,onChange:function(e){w({price:e.target.value})}})})]}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){w({slug:Q.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Color",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Color",value:f.color,onChange:function(e){w({color:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Kilo-Gram",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Kilo-Gram",value:f.kg,onChange:function(e){w({kg:e.target.value})}})})})]})})})})})})),ke=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})})),we=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailUser",value:function(e,t){return U.Z.get(this.baseURL+"/details-user/"+e,{params:t})}},{key:"listUser",value:function(e){return U.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e,t){return U.Z.post(this.baseURL+"/save-user",e,{params:t})}},{key:"deleteUser",value:function(e){return U.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();we.baseURL="user";var De=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailJob",value:function(e,t){return U.Z.get(this.baseURL+"/address/details"+e,{params:t})}},{key:"listJob",value:function(e){return U.Z.get(this.baseURL+"/address/list",{params:e})}},{key:"saveJob",value:function(e,t){return U.Z.post(this.baseURL+"/address/save",e,{params:t})}},{key:"deleteJob",value:function(e){return U.Z.post(this.baseURL+"/address/delete",{ids:e})}}]),e}();function Te(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),Z=(0,x.Z)(f,2),v=Z[0],y=Z[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),_=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"City",dataIndex:"city"},{title:"Pin",dataIndex:"pin"},{title:"State",dataIndex:"state"},{title:"Street 1",dataIndex:"street1"},{title:"Street 2",dataIndex:"street2"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){O(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),De.listJob(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var O=function(e){De.deleteJob(e).then((function(e){z(e.message),R(),y([])})).catch((function(e){z(e.message,"error")}))},A=_.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var U={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(_e,{addNewModalRef:k,selected:v,deleteData:O,qData:S,setQData:I,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},U),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Re,{ref:k,list:R,userId:t}),(0,u.jsx)(Oe,{ref:w,list:R})]})}function _e(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}De.baseURL="user";var Re=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],S=j[1],w=function(e){Z((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),Z(e?(0,p.Z)({},e):{userId:i})}}}));var D=function(){S(!0),De.saveJob(f).then((function(e){z(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:Q.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"City",value:f.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Pin",value:f.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"State",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"State",value:f.state,onChange:function(e){w({state:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 1",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 1",value:f.street1,onChange:function(e){w({street1:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 2",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 2",value:f.street2,onChange:function(e){w({street2:e.target.value})}})})})]})})})})})})),Oe=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Te,{productId:c._id})})})})),Ae=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"detailProduct",value:function(e,t){return U.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listProduct",value:function(e){return U.Z.get(this.baseURL+"list",{params:e})}},{key:"saveProduct",value:function(e,t){return U.Z.post(this.baseURL+"save",e,{params:t})}},{key:"saveAddOnProduct",value:function(e,t){return U.Z.post(this.baseURL+"save-addon",e,{params:t})}},{key:"detailUser",value:function(e,t){return U.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return U.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return U.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return U.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Ue(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),Z=(0,x.Z)(f,2),v=Z[0],y=Z[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),_=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product Name",dataIndex:"name"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){O(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),Ae.listProduct(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var O=function(e){Ae.deleteJob(e).then((function(e){z(e.message),R(),y([])})).catch((function(e){z(e.message,"error")}))},A=_.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var U={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(qe,{addNewModalRef:k,selected:v,deleteData:O,qData:S,setQData:I,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},U),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ne,{ref:k,list:R,userId:t}),(0,u.jsx)(Fe,{ref:w,list:R})]})}function qe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Ae.baseURL="ecommerce/product/";var Ne=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],S=j[1],w=function(e){Z((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),Z(e?(0,p.Z)({},e):{userId:i})}}}));var D=function(){S(!0),Ae.saveJob(f).then((function(e){z(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:Q.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"City",value:f.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Pin",value:f.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"State",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"State",value:f.state,onChange:function(e){w({state:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 1",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 1",value:f.street1,onChange:function(e){w({street1:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 2",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 2",value:f.street2,onChange:function(e){w({street2:e.target.value})}})})})]})})})})})})),Fe=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ue,{productId:c._id})})})}));function Le(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,userId:t}),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),_=(0,a.useRef)(),R=(0,a.useRef)(),O=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Username",dataIndex:"name",width:150},{title:"Phone",dataIndex:"phone",width:100},{title:"Email",dataIndex:"email",width:200},{title:"Job",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){_.current.openForm({_id:t._id,name:t.name})},children:"Address"})}},{title:"Cart",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){R.current.openForm({_id:t._id,name:t.name})},children:"Cart"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return"blocked"===e?(0,u.jsx)(Z.Z,{color:"red",children:"Blocked"}):"active"===e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"yellow",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){h(!0),we.listUser(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),k((0,p.Z)((0,p.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var U=function(e){we.deleteUser(e).then((function(e){z(e.message),A(),b([])})).catch((function(e){z(e.message,"error")}))},q=O.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));q[0].fixed=!0,q[q.length-1].fixed="right";var N={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Pe,{addNewModalRef:w,selected:y,deleteData:U,qData:I,setQData:k,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},N),{},{pagination:{position:["none"],pageSize:I.limit},columns:q,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ee,{ref:w,list:A,userId:t}),(0,u.jsx)(Be,{ref:_}),(0,u.jsx)(ze,{ref:R})]})}function Pe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsxs)(S.Z,{value:i.status,allowClear:!0,placeholder:"Search By Status",onChange:function(e){r((0,p.Z)((0,p.Z)({},i),{},{status:e}))},children:[(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(S.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(S.Z.Option,{value:"blocked",children:"Blocked"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var Ee=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,x.Z)(D,2),_=T[0],O=T[1],A=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{userId:i})}}}));var U=function(){w(!0),we.saveUser(f).then((function(e){z(e.message),A((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),we.detailUser(f._id).then((function(e){var t,n;Z(e.data||{}),O(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){z(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?O([]):Z({_id:null})}),[s]),(0,a.useEffect)((function(){A({avatar:null===_||void 0===_?void 0:_[0]})}),[_]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:U,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:U,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:20,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Username",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"John Doe",value:f.name,onChange:function(e){A({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Email",value:f.email,onChange:function(e){A({email:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Phone",value:f.phone,onChange:function(e){A({phone:e.target.value})}})})})]})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Avatar",children:(0,u.jsx)(je,{fileList:_,setFileList:O,count:1})})}),(0,u.jsx)(b.Z,{span:10,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(S.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(S.Z.Option,{value:"blocked",children:"Blocked"})]})})})]})})})})})})),Be=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,p.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Job List ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Te,{userId:c._id})})})})),ze=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,p.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Product List of ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Ue,{userId:c._id})})})})),Me=n(7128);function Ye(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)([]),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useState)({page:1,limit:20,parentId:t,type:"product"}),_=(0,x.Z)(w,2),R=_[0],O=_[1],A=(0,a.useRef)(),U=(0,a.useRef)(),q=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Description",dataIndex:"description",width:400,render:function(e){return(0,u.jsx)(j.Z.Text,{ellipsis:{expandable:!0},children:e})}},{title:"Meta-Title",dataIndex:"metaTitle",width:100},{title:"Meta-Tag",dataIndex:"metaTag",width:100},{title:"Meta-Description",dataIndex:"metaDescription",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){F(t)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){A.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function N(){h(!0),Ae.listUser(R).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),O((0,p.Z)((0,p.Z)({},R),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var F=function(e){Ae.deleteUser(e).then((function(e){z(e.message),N(),b([])})).catch((function(e){z(e.message,"error")}))},P=q.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));P[0].fixed=!0,P[P.length-1].fixed="right";var E={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Qe,{addNewModalRef:A,selected:y,deleteData:F,qData:R,setQData:O,list:N})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:R,setQData:O})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){N(),le.list().then((function(e){k(e.data||[])})).catch((function(e){z("Product data not loaded","error")}))}),[R.page,R.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},E),{},{pagination:{position:["none"],pageSize:R.limit},columns:P,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(He,{ref:A,list:N,parentId:t,category:I}),(0,u.jsx)(Ve,{ref:U,list:N})]})}function Qe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var He=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=e.category,l=(0,a.useState)(!1),s=(0,x.Z)(l,2),o=s[0],c=s[1],h=(0,a.useState)({aspect:1}),f=(0,x.Z)(h,2),Z=f[0],m=f[1],j=(0,a.useState)(!1),g=(0,x.Z)(j,2),w=g[0],D=g[1],T=(0,a.useState)([]),_=(0,x.Z)(T,2),O=_[0],A=_[1],U=(0,a.useState)([]),q=(0,x.Z)(U,2),N=q[0],F=q[1],L=function(e,t){for(var n=Z,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);m((0,p.Z)((0,p.Z)({},Z),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){c(!0),m(e?(0,p.Z)({},e):{parentId:i,isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}]})}}}));var P=function(){D(!0),Ae.saveUser(Z).then((function(e){B.ZP.success(e.message),n(),c(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else z(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){Z._id&&(D(!0),Ae.detailUser(Z._id).then((function(e){m(e.data||{}),F(e.data.imgs.length?(0,J.Z)(e.data.imgs):[]),A(e.data.thumbImg?[e.data.thumbImg]:[])})).catch((function(e){z(e.message,"error")})).finally((function(){D(!1)})))}),[Z._id]),(0,a.useEffect)((function(){Z._id||L(Q.Z.removeSpecialChars(Z.name||""),"slug")}),[Z.name]),(0,a.useEffect)((function(){Z._id||L(Q.Z.removeSpecialChars((null===Z||void 0===Z?void 0:Z.name)||""),"slug")}),[Z.name]),(0,a.useEffect)((function(){m((0,p.Z)((0,p.Z)({},Z),{},{thumbImg:O[0]}))}),[O]),(0,a.useEffect)((function(){m((0,p.Z)((0,p.Z)({},Z),{},{imgs:N}))}),[N]),(0,a.useEffect)((function(){o||m({})}),[o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(Z._id?"Edit":"Add New")+" Product",style:{top:20},open:o,okText:"Save",onOk:P,okButtonProps:{disabled:w},onCancel:function(){c(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){c(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:P,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:w,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:Z.name,onChange:function(e){L(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:Z.slug,onChange:function(e){L(Q.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:4,placeholder:"Description",value:Z.description,onChange:function(e){L(Q.Z.removeSpecialChars(e.target.value),"description")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Meta-Title",value:Z.metaTitle,onChange:function(e){L(e.target.value,"metaTitle")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",value:Z.categoryIds,onChange:function(e){L(e,"categoryIds")},options:r.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Tag",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Meta-Tag",value:Z.metaTag,onChange:function(e){L(e.target.value,"metaTag")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Meta-Description",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:4,placeholder:"Meta-Description",value:Z.metaDescription,onChange:function(e){L(e.target.value,"metaDescription")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"High-Light",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:4,placeholder:"High-Light...",value:Z.heighlight,onChange:function(e){L(e.target.value,"heighlight")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Premium",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.isPremium,onChange:function(e){L(e,"isPremium")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Best Selling",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.isBestSelling,onChange:function(e){L(e,"isBestSelling")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Best Selling Combos",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.isBestSellingCombos,onChange:function(e){L(e,"isBestSellingCombos")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"BirthDay",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.forBirthday,onChange:function(e){L(e,"forBirthday")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Anniversary",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.forAnniversary,onChange:function(e){L(e,"forAnniversary")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:Z.status,onChange:function(e){L(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(We,{variantDetails:Z.variants,parentKay:"variants",handleChange:L})}),(0,u.jsx)(Me.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(je,{fileList:O,setFileList:A})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:N,setFileList:F,count:20})})})]})})})})})})),Ve=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"Variants of ".concat(c.name):"Add User of ".concat(c.name),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})}));function We(e){var t=e.variantDetails,n=e.parentKay,i=e.handleChange;return(0,a.useEffect)((function(){console.log(n,"variants"===n)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(Me.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"})}),(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Weight"})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Price"})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)("label",{className:"req",children:"Actual Price (In \u20b9)"})})]}),null===t||void 0===t?void 0:t.map((function(e,r){return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Weight",value:e.weight,onChange:function(e){i(e.target.value,"".concat(n,".").concat(r,".weight"))}})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Price",value:e.price,onChange:function(e){i(Q.Z.handleInteger(e.target.value),"".concat(n,".").concat(r,".price"))}})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(C.Z,{placeholder:"Actual Price",value:e.actualPrice,onChange:function(e){i(Q.Z.handleFloat(e.target.value),"".concat(n,".").concat(r,".actualPrice"))}})}),(0,u.jsxs)(b.Z,{span:8,children:[r+1===t.length?(0,u.jsx)(d.Z,{type:"dashed",onClick:function(){i([].concat((0,J.Z)(t),[{}]),n)},children:"Add"}):null,r+1===t.length&&0!==r?(0,u.jsx)(d.Z,{type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),i((0,J.Z)(t),n)},children:"Remove"}):null]})]})},r)}))]})}var Je=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return U.Z.get(this.baseURL+"/details/"+e)}}]),e}();function Ke(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],Z=h[1],v=(0,a.useState)({page:1,limit:20}),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useState)([]),I=(0,x.Z)(S,2),k=I[0],w=I[1],_=(0,a.useState)([]),R=(0,x.Z)(_,2),O=R[0],A=R[1],U=(0,a.useRef)(),q=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title",width:150},{title:"Discount Percent",dataIndex:"discountPercent",width:100},{title:"Max Discount",dataIndex:"maxDiscountValue",width:100},{title:"Min Order Price",dataIndex:"minimunOrderPrice",width:100},{title:"Duration",dataIndex:"startDate",width:200,render:function(e,t){return(0,u.jsxs)("span",{children:[E()(e).format("DD MMM YYYY")," To ",E()(t.endDate).format("DD MMM YYYY")," "]})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){P(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){U.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function F(){o(!0),Je.list(b).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),C((0,p.Z)((0,p.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var P=function(e){Je.delete(e).then((function(e){z(e.message),F(),Z([])})).catch((function(e){z(e.message,"error")}))},B=q.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));B[0].fixed=!0,B[B.length-1].fixed="right";var M={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(Ge,{addNewModalRef:U,selected:f,deleteData:P,qData:b,setQData:C,list:F})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:b,setQData:C})},rowSelection:{onChange:function(e){Z(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){F(),Ae.listUser().then((function(e){w(e.data||[])})).catch((function(e){z("Product data not loaded","error")})),N.listUser().then((function(e){A(e.data||[])})).catch((function(e){z("User data not loaded","error")}))}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Offer"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},M),{},{pagination:{position:["none"],pageSize:b.limit},columns:B,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Xe,{ref:U,list:F,product:k,user:O})]})}function Ge(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Je.baseURL="offer";var Xe=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.product,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],D=j[1],T=(0,a.useState)([]),_=(0,x.Z)(T,2),O=_[0],A=_[1],U=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{fileType:"photo"})}}}));var q=function(){D(!0),Je.save(f).then((function(e){z(e.message),U((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){f._id&&(D(!0),Je.details(f._id).then((function(e){Z(e.data||{}),A(e.data.imgs.length?(0,J.Z)(e.data.imgs):[])})).catch((function(e){z(e.message,"error")})).finally((function(){D(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||U({slug:Q.Z.removeSpecialChars(f.title)})}),[f.title]),(0,a.useEffect)((function(){Z((0,p.Z)((0,p.Z)({},f),{},{imgs:O}))}),[O]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Offer",style:{top:20},open:s,okText:"Save",onOk:q,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:q,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.title,onChange:function(e){U({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Discount Percent",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Discount Percent",value:f.discountPercent,onChange:function(e){U({discountPercent:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Max Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Max Discount Amount",value:f.maxDiscountValue,onChange:function(e){U({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){U({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){U({slug:Q.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Product",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",value:f.productIds,onChange:function(e){U({productIds:e})},options:i.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Duration",required:!0,children:(0,u.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",value:f.startDate&&f.endDate&&[Y()(f.startDate),Y()(f.endDate)],onChange:function(e){U({startDate:null!==e&&void 0!==e&&e[0]?new Date(null===e||void 0===e?void 0:e[0]):null,endDate:null!==e&&void 0!==e&&e[1]?new Date(null===e||void 0===e?void 0:e[1]):null})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:O,setFileList:A,count:1})})})]})})})})})}));function $e(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)([]),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useState)({page:1,limit:20,parentId:t,type:"addOn"}),_=(0,x.Z)(w,2),R=_[0],O=_[1],A=(0,a.useRef)(),U=(0,a.useRef)(),q=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Description",dataIndex:"description",width:400,render:function(e){return(0,u.jsx)(j.Z.Text,{ellipsis:{expandable:!0},children:e})}},{title:"Type",dataIndex:"type",render:function(e){return(0,u.jsx)(Z.Z,{color:"blue",children:"AddOn"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){F(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){A.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function N(){h(!0),Ae.listUser(R).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),O((0,p.Z)((0,p.Z)({},R),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var F=function(e){Ae.deleteUser(e).then((function(e){z(e.message),N(),b([])})).catch((function(e){z(e.message,"error")}))},P=q.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));P[0].fixed=!0,P[P.length-1].fixed="right";var E={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(et,{addNewModalRef:A,selected:y,deleteData:F,qData:R,setQData:O,list:N})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:R,setQData:O})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){N(),le.list().then((function(e){k(e.data||[])})).catch((function(e){z("Product data not loaded","error")}))}),[R.page,R.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},E),{},{pagination:{position:["none"],pageSize:R.limit},columns:P,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(tt,{ref:A,list:N,parentId:t,category:I}),(0,u.jsx)(nt,{ref:U,list:N})]})}function et(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var tt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=(e.category,(0,a.useState)(!1)),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,x.Z)(D,2),_=T[0],O=T[1],A=(0,a.useState)([]),U=(0,x.Z)(A,2),q=U[0],N=U[1],F=function(e,t){for(var n=f,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{parentId:i,isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}]})}}}));var L=function(){w(!0),Ae.saveAddOnProduct(f).then((function(e){z(e.message),F((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),Ae.detailUser(f._id).then((function(e){Z(e.data||{}),N(e.data.imgs.length?(0,J.Z)(e.data.imgs):[]),O(e.data.thumbImg?[e.data.thumbImg]:[])})).catch((function(e){z(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){f._id||F(Q.Z.removeSpecialChars(f.name||""),"slug")}),[f.name]),(0,a.useEffect)((function(){f._id||F(Q.Z.removeSpecialChars((null===f||void 0===f?void 0:f.name)||""),"slug")}),[f.name]),(0,a.useEffect)((function(){Z((0,p.Z)((0,p.Z)({},f),{},{thumbImg:_[0]}))}),[_]),(0,a.useEffect)((function(){Z((0,p.Z)((0,p.Z)({},f),{},{imgs:q}))}),[q]),(0,a.useEffect)((function(){s||Z({})}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add New")+" AddOn Product",style:{top:20},open:s,okText:"Save",onOk:L,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:L,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:f.name,onChange:function(e){F(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){F(Q.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:4,placeholder:"Description",value:f.description,onChange:function(e){F(Q.Z.removeSpecialChars(e.target.value),"description")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.type,onChange:function(e){F(e,"type")},children:[(0,u.jsx)(S.Z.Option,{value:"addOn",children:"AddOn"}),(0,u.jsx)(S.Z.Option,{value:"product",children:"Product"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){F(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(at,{variantDetails:f.variants,parentKay:"variants",handleChange:F})}),(0,u.jsx)(Me.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(je,{fileList:_,setFileList:O})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(je,{fileList:q,setFileList:N,count:20})})})]})})})})})})),nt=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"Variants of ".concat(c.name):"Add User of ".concat(c.name),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})}));function at(e){var t=e.variantDetails,n=e.parentKay,i=e.handleChange;return(0,a.useEffect)((function(){console.log(n,"variants"===n)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(Me.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"})}),(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Weight"})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Price"})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)("label",{className:"req",children:"Actual Price (In \u20b9)"})})]}),null===t||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Weight",value:e.weight,onChange:function(e){i(e.target.value,"".concat(n,".").concat(t,".weight"))}})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Price",value:e.price,onChange:function(e){i(Q.Z.handleInteger(e.target.value),"".concat(n,".").concat(t,".price"))}})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(C.Z,{placeholder:"Actual Price",value:e.actualPrice,onChange:function(e){i(Q.Z.handleFloat(e.target.value),"".concat(n,".").concat(t,".actualPrice"))}})})]})},t)}))]})}var it=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return U.Z.get(this.baseURL+"/details/"+e)}}]),e}();function rt(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=(0,a.useState)([]),w=(0,x.Z)(k,2),_=w[0],R=w[1],O=(0,a.useState)([]),A=(0,x.Z)(O,2),U=A[0],q=A[1],N=(0,a.useState)([]),F=(0,x.Z)(N,2),P=F[0],E=F[1],B=(0,a.useState)([]),M=(0,x.Z)(B,2),Y=M[0],Q=M[1],H=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product ",dataIndex:"productDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(Z.Z,{children:e.name})}))}},{title:"Categories ",dataIndex:"categoryDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(Z.Z,{children:e.name})}))}},{title:"Banners ",dataIndex:"bannerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(ue.Z,{src:null===e||void 0===e?void 0:e.imgUrl,height:80})}))}},{title:"Offer ",dataIndex:"offerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(Z.Z,{children:e.title})}))}},{title:"Display Order",dataIndex:"displayOrder",width:250},{title:"Display Type",dataIndex:"displayType",width:250},{title:"Slug",dataIndex:"slug",width:150},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this data?",onConfirm:function(){W(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){I.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function V(){o(!0),it.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}(0,a.useEffect)((function(){V()}),[]);var W=function(e){it.delete(e).then((function(e){z(e.message),V(),v([])})).catch((function(e){z(e.message,"error")}))},J=H.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));J[0].fixed=!0,J[J.length-1].fixed="right";var K={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(lt,{addNewModalRef:I,selected:f,deleteData:W,qData:C,setQData:S,list:V})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){Ae.listUser({isAll:1}).then((function(e){R(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))})),Je.list({isAll:1}).then((function(e){E(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.title,value:e._id})})))})),le.list({isAll:1}).then((function(e){q(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))})),he.bannerList({isAll:1}).then((function(e){Q(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},K),{},{pagination:{position:["none"],pageSize:C.limit},columns:J,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(st,{ref:I,list:V,allProduct:_,allBanners:Y,allCategories:U,allOffers:P})]})}function lt(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}it.baseURL="homepageitems";var st=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.allProduct,r=e.allBanners,l=e.allCategories,s=e.allOffers,o=(0,a.useState)(!1),c=(0,x.Z)(o,2),h=c[0],f=c[1],Z=(0,a.useState)({aspect:1}),m=(0,x.Z)(Z,2),j=m[0],g=m[1],w=(0,a.useState)(!1),D=(0,x.Z)(w,2),T=D[0],_=D[1],O=function(e,t){for(var n=j,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);g((0,p.Z)({},j))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){f(!0),g(e?(0,p.Z)({},e):{})}}}));var A=function(){_(!0),it.save(j).then((function(e){z(e.message),O((0,p.Z)({},e.data)),n(),f(!1)})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){_(!1)}))};return(0,a.useEffect)((function(){j._id&&(_(!0),it.details(j._id).then((function(e){g(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){_(!1)})))}),[j._id]),(0,a.useEffect)((function(){j._id||O(Q.Z.removeSpecialChars(j.slug||""),"slug")}),[j.slug]),(0,a.useEffect)((function(){h||g({})}),[h]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(j._id?"Edit":"Add New")+" Product",style:{top:20},open:h,okText:"Save",onOk:A,okButtonProps:{disabled:T},onCancel:function(){f(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){f(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:T,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(S.Z,{value:j.type,onChange:function(e){O(e,"type")},children:[(0,u.jsx)(S.Z.Option,{value:"category",children:"Category"}),(0,u.jsx)(S.Z.Option,{value:"banner",children:"Banner"}),(0,u.jsx)(S.Z.Option,{value:"offer",children:"Offer"}),(0,u.jsx)(S.Z.Option,{value:"products",children:"Products"})]})})}),"products"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Product",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Products",onChange:function(e){O(e,"productIds")},optionLabelProp:"label",allowClear:!0,value:j.productIds,options:i.filter((function(e){return!0}))})})}),"banner"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Banners",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Banners",onChange:function(e){O(e,"bannerIds")},optionLabelProp:"label",allowClear:!0,value:j.bannerIds,options:r.filter((function(e){return!0}))})})}),"category"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Categories",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Categories",onChange:function(e){O(e,"categoryIds")},optionLabelProp:"label",allowClear:!0,value:j.categoryIds,options:l.filter((function(e){return!0}))})})}),"offer"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Offers",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Offers",onChange:function(e){O(e,"offerIds")},optionLabelProp:"label",allowClear:!0,value:j.offerIds,options:s.filter((function(e){return!0}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",children:(0,u.jsx)(C.Z,{placeholder:"title",value:j.title,onChange:function(e){O(e.target.value,"title")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"slug",value:j.slug,onChange:function(e){O(Q.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Display Order",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"1",type:"number",value:j.displayOrder,onChange:function(e){O(e.target.value,"displayOrder")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Display Type",required:!0,children:(0,u.jsxs)(S.Z,{value:j.displayType,onChange:function(e){O(e,"displayType")},children:[(0,u.jsx)(S.Z.Option,{value:"grid",children:"Grid"}),(0,u.jsx)(S.Z.Option,{value:"scroll",children:"Scroll"})]})})})]})})})})})})),ot=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"list",value:function(e){return U.Z.get("order/list",{params:e})}},{key:"save",value:function(e,t){return U.Z.post("order/save",e,{params:t})}},{key:"delete",value:function(e){return U.Z.post("order/delete",{ids:e})}},{key:"details",value:function(e){return U.Z.get("order/details/"+e)}}]),e}();function ct(e){var t=e.type,n=e.orderId,i=void 0===n?null:n,r=(0,a.useState)([]),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)(!1),d=(0,x.Z)(c,2),h=d[0],f=d[1],Z=(0,a.useState)([]),m=(0,x.Z)(Z,2),j=m[0],v=m[1],y=(0,a.useState)({page:1,limit:20,type:t,orderId:i}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=[{title:"Cat Id",dataIndex:"productVariantDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.catId}},{title:"Product Name",dataIndex:"productDetails",width:250,render:function(e){return(0,u.jsx)("span",{children:null===e||void 0===e?void 0:e.name})}},{title:"Price",dataIndex:"productVariantDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",null===e||void 0===e?void 0:e.price]})}},{title:"With Discount Price",dataIndex:"productVariantDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",(null===e||void 0===e?void 0:e.withDiscountPrice)||(null===e||void 0===e?void 0:e.price)]})}}].filter((function(e){return!e.hidden}));function w(){f(!0),ot.orderDetailList(C).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){f(!1)}))}var D=function(e){ot.orderDetailDelete(e).then((function(e){z(e.message),w(),v([])})).catch((function(e){z(e.message,"error")}))},T=k.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));T[0].fixed=!0,T[T.length-1].fixed="right";var _={bordered:!0,loading:h,size:"small",title:function(){return(0,u.jsx)(dt,{addNewModalRef:I,selected:j,deleteData:D,qData:C,setQData:S,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},_),{},{pagination:{position:["none"],pageSize:C.limit},columns:T,dataSource:s.length?s:[]})),(0,u.jsx)(ut,{ref:I,list:w,type:t,orderId:i})]})}function dt(e){e.addNewModalRef;var t=e.selected,n=e.deleteData,a=(e.qData,e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:a,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Reload"})})}),(0,u.jsx)(b.Z,{span:5,children:t.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected product attributes ?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null})]})})}ot.baseURL="";var ut=(0,a.forwardRef)((function(e,t){var n,i=e.list,r=e.orderId,l=(0,a.useState)(!1),s=(0,x.Z)(l,2),o=s[0],c=s[1],h=(0,a.useState)({aspect:1}),f=(0,x.Z)(h,2),Z=f[0],m=f[1],j=(0,a.useState)(!1),g=(0,x.Z)(j,2),S=g[0],w=g[1],D=(0,a.useState)("en"),T=(0,x.Z)(D,2),_=T[0],O=T[1],A=(0,a.useState)(!1),U=(0,x.Z)(A,2),q=U[0],N=U[1],F=function(e){q&&(Object.entries(e).forEach((function(e){for(var t=Z,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),m((0,p.Z)({},Z)))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){c(!0),m(e?{_id:e}:{orderId:r}),N(!0)}}}));var L=function(){q&&(w(!0),ot.orderDetailSave(Z,{ln:_}).then((function(e){z(e.message),F((0,p.Z)({},e.data)),"en"===_&&i()})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){w(!1)})))};return(0,a.useEffect)((function(){Z._id&&(w(!0),ot.orderDetailDetails(Z._id).then((function(e){m(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){w(!1)})))}),[_,Z._id]),(0,a.useEffect)((function(){o?O("en"):m({_id:null})}),[o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(Z._id?"Edit":"Add")+" Order",style:{top:20},open:o,okText:"Save",onOk:L,okButtonProps:{disabled:S},onCancel:function(){c(!1)},maskClosable:!1,width:900,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){c(!1)},children:"Cancel"},"cancel"),q?(0,u.jsx)(d.Z,{type:"primary",onClick:L,children:"Save"},"save"):null],children:(0,u.jsx)(k.Z,{spinning:S,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",disabled:!q,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Product Id",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Value",value:null===Z||void 0===Z?void 0:Z._id,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Product Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Value",value:null===Z||void 0===Z||null===(n=Z.productId)||void 0===n?void 0:n.name,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Price",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Price",value:Z.price,onChange:function(e){F({price:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Actual Price",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Actual price",value:Z.actualPrice,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Quantity",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Quantity",value:Z.quantity,onChange:function(e){F({quantity:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Total ",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Total",value:Z.total,onChange:function(e){F({total:e.target.value})}})})})]})})})})})}));function ht(e){var t=e.type,n=e.categoryId,i=void 0===n?null:n,r=(0,a.useState)([]),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)(!1),h=(0,x.Z)(c,2),f=h[0],m=h[1],v=(0,a.useState)([]),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useState)({page:1,limit:20,type:t,categoryId:i}),I=(0,x.Z)(S,2),k=I[0],w=I[1],D=(0,a.useRef)(),T=[{title:"Order id",dataIndex:"orderId"},{title:"Shipping Address",dataIndex:"addressDetails",width:250,render:function(e){var t=JSON.parse(e);return(0,u.jsx)("span",{children:t.address+" "+t.state+" "+t.pin})}},{title:"Total Amount",dataIndex:"priceDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",e.finalPrice]})}},{title:"Details",dataIndex:"orderId",width:150,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){D.current.openForm({_id:t._id})},children:"Order Details"})}},{title:"Status",dataIndex:"status",width:200,render:function(e,t){var n=t.status;return(0,u.jsx)(Z.Z,{color:"green",children:n})}}].filter((function(e){return!e.hidden}));function _(){m(!0),ot.list(k).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),w((0,p.Z)((0,p.Z)({},k),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){m(!1)}))}var R=function(e){ot.delete(e).then((function(e){z(e.message),_(),C([])})).catch((function(e){z(e.message,"error")}))},O=T.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));O[0].fixed=!0,O[O.length-1].fixed="right";var A={bordered:!0,loading:f,size:"small",title:function(){return(0,u.jsx)(ft,{selected:b,deleteData:R,qData:k,setQData:w,list:_,categoryId:i})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:k,setQData:w})},rowSelection:{onChange:function(e){C(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){_()}),[k.page,k.limit]),(0,u.jsxs)(u.Fragment,{children:[i?null:(0,u.jsx)(j.Z.Title,{level:5,children:"List of Orders"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},A),{},{pagination:{position:["none"],pageSize:k.limit},columns:O,dataSource:s.length?s:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(pt,{ref:D})]})}function ft(e){var t=e.selected,n=e.deleteData,a=e.qData,i=e.setQData,r=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by order id",value:a.key,onChange:function(e){return i((0,p.Z)((0,p.Z)({},a),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsx)(b.Z,{span:5,children:t.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected Order?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null})]})})}var pt=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d(e)}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Details of Order:"," ",(0,u.jsx)(j.Z.Text,{type:"danger",children:c._id})]}),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},maskClosable:!1,width:1200,destroyOnClose:!0,className:"app-modal-body-overflow",footer:null,children:(0,u.jsx)(ct,{type:c.type,orderId:c._id})})})})),xt=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"typeDetails",value:function(e,t){return U.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"typeList",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"typeSave",value:function(e,t){return U.Z.post(this.baseURL+"/create",e,{params:t})}},{key:"typeDelete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function Zt(e){var t=e.type,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,type:t}),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useState)([]),_=(0,x.Z)(w,2),R=_[0],O=(_[1],(0,a.useRef)()),A=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"name",width:150,dataIndex:"name"},{title:"Type",width:100,dataIndex:"type"},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete this User?",onConfirm:function(){q(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){O.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),xt.typeList(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),k((0,p.Z)((0,p.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var q=function(e){xt.typeDelete(e).then((function(e){B.ZP.success(e.message),U(),b([])})).catch((function(e){B.ZP.error(e.message)}))},N=A.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));console.log(N),N[0].fixed=!0,N[N.length-1].fixed="right";var F={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(mt,{addNewModalRef:O,selected:y,deleteData:q,qData:I,setQData:k,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){U()}),[I.page,I.limit,t]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{style:{padding:"0px 10px",border1:"1px solid black"},children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0}}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},F),{},{pagination:{position:["none"],pageSize:I.limit},columns:N,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(jt,{ref:O,list:U,user:R,type:t})]})})}function mt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,r=e.qData,l=e.setQData,s=e.list,o=(0,a.useState)([]),c=(0,x.Z)(o,2),h=c[0],f=c[1];return(0,a.useEffect)((function(){xt.typeList().then((function(e){var t;f(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{label:e.title,value:e._id}})))}))}),[]),(0,u.jsx)(v.Z,{onSubmitCapture:s,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(S.Z,{showSearch:!0,allowClear:!0,placeholder:"Select an Account",onChange:function(e){return l((0,p.Z)((0,p.Z)({},r),{},{_id:e,title:h[0].label}))},options:h})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}xt.baseURL="master";var jt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.type,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],S=j[1],w=(0,a.useState)([]),D=(0,x.Z)(w,2),T=(D[0],D[1]),_=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{})}}}));var O=function(){console.log("ddd"),S(!0),xt.typeSave((0,p.Z)((0,p.Z)({},f),{},{type:i})).then((function(e){B.ZP.success(e.message),_((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else B.ZP.error(e.message)})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){f._id&&(S(!0),xt.typeDetails(f._id).then((function(e){var t,n;Z(e.data||{}),T(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){B.ZP.error(e.message)})).finally((function(){S(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?T([]):Z({_id:null})}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Coupon",style:{top:20},open:s,okText:"Save",onOk:O,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:O,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:16,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.name,onChange:function(e){_({name:e.target.value})}})})})})})})})})}));function gt(){var e=(0,a.useState)("ocassion"),t=(0,x.Z)(e,2),n=t[0],i=t[1];return(0,u.jsx)(K.Z,{onChange:function(e){i(e)},activeKey:n,items:[{label:"Occasion",key:"ocassion",children:(0,u.jsx)(Zt,{type:n})},{label:"Recipient",key:"recipient",children:(0,u.jsx)(Zt,{type:n})},{label:"Flavour",key:"flavour",children:(0,u.jsx)(Zt,{type:n})},{label:"Relation",key:"relation",children:(0,u.jsx)(Zt,{type:n})}]})}var vt=function(){function e(){(0,O.Z)(this,e)}return(0,A.Z)(e,null,[{key:"deliveryTypeDetails",value:function(e,t){return U.Z.get(this.baseURL+"/delivery-type/details/"+e,{params:t})}},{key:"deliveryTypeList",value:function(e){return U.Z.get(this.baseURL+"/delivery-type/list",{params:e})}},{key:"deliveryTypeSave",value:function(e,t){return U.Z.post(this.baseURL+"/delivery-type/save",e,{params:t})}},{key:"deliveryTypeDelete",value:function(e){return U.Z.post(this.baseURL+"/delivery-type/delete",{ids:e})}},{key:"deliveryDetails",value:function(e,t){return U.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"deliveryList",value:function(e){return U.Z.get(this.baseURL+"/list",{params:e})}},{key:"deliverySave",value:function(e,t){return U.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"deliveryDelete",value:function(e){return U.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function yt(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title",width:80},{title:"DeliveryCharge",dataIndex:"deliveryCharge",width:80},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){_(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){I.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function w(){o(!0),vt.deliveryTypeList(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var _=function(e){vt.deliveryTypeDelete(e).then((function(e){z(e.message),w(),v([])})).catch((function(e){z(e.message,"error")}))},R=k.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));R[0].fixed=!0,R[R.length-1].fixed="right";var O={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(bt,{addNewModalRef:I,selected:f,deleteData:_,qData:C,setQData:S,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Delivery Type"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},O),{},{pagination:{position:["none"],pageSize:C.limit},columns:R,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ct,{ref:I,list:w})]})}function bt(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete these selected data?. Be sure to delete from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}vt.baseURL="delivery";var Ct=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,x.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)({aspect:1}),c=(0,x.Z)(o,2),h=c[0],f=c[1],Z=(0,a.useState)(!1),m=(0,x.Z)(Z,2),j=m[0],g=m[1],w=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),f((0,p.Z)({},h))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),f(e?{_id:e}:{status:!0})}}}));var D=function(){g(!0),vt.deliveryTypeSave(h).then((function(e){z(e.message),w((0,p.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){g(!1)}))};return(0,a.useEffect)((function(){h._id&&(g(!0),vt.deliveryTypeDetails(h._id).then((function(e){f(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){g(!1)})))}),[h._id]),(0,a.useEffect)((function(){l||f({_id:null})}),[l]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(h._id?"Edit":"Add")+" Delivery Type",style:{top:20},open:l,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:j,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Title",children:(0,u.jsx)(C.Z,{placeholder:"Title",value:h.title,onChange:function(e){w({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Delivery Charge",children:(0,u.jsx)(C.Z,{placeholder:"Delivery Charge",value:h.deliveryCharge,onChange:function(e){w({deliveryCharge:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:h.status,onChange:function(e){w({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),St=n(7943);function It(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)([]),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useState)({page:1,limit:20}),k=(0,x.Z)(I,2),w=k[0],_=k[1],R=(0,a.useRef)(),O=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Delivery Type",dataIndex:"DeliveryTypeDetails",width:80,render:function(e){return e.title}},{title:"Start Time",dataIndex:"startTime",width:80,render:function(e,t){return(0,u.jsx)("span",{children:E()(e).format("DD MMM YYYY")})}},{title:"End Time",dataIndex:"endTime",width:80,render:function(e,t){return(0,u.jsx)("span",{children:E()(e).format("DD MMM YYYY")})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(Z.Z,{color:"green",children:"Active"}):(0,u.jsx)(Z.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){R.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){o(!0),vt.deliveryList(w).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),_((0,p.Z)((0,p.Z)({},w),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var U=function(e){vt.deliveryDelete(e).then((function(e){z(e.message),A(),v([])})).catch((function(e){z(e.message,"error")}))},q=O.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));q[0].fixed=!0,q[q.length-1].fixed="right";var N={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(kt,{addNewModalRef:R,selected:f,deleteData:U,qData:w,setQData:_,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(L,{qData:w,setQData:_})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A(),vt.deliveryTypeList().then((function(e){S(e.data||[])})).catch((function(e){z("DeliveryType data not loaded","error")}))}),[w.page,w.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Delivery"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},N),{},{pagination:{position:["none"],pageSize:w.limit},columns:q,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(wt,{ref:R,list:A,deliveryType:C})]})}function kt(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(_.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(m.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var wt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.deliveryType,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],Z=h[1],m=(0,a.useState)(!1),j=(0,x.Z)(m,2),g=j[0],C=j[1],w=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),Z(e?{_id:e}:{status:!0})}}}));var D=function(){C(!0),vt.deliverySave(f).then((function(e){z(e.message),w((0,p.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?z(e.message[Object.keys(e.message)[0]],"error"):z(e.message,"error")})).finally((function(){C(!1)}))};return(0,a.useEffect)((function(){f._id&&(C(!0),vt.deliveryDetails(f._id).then((function(e){Z(e.data||{})})).catch((function(e){z(e.message,"error")})).finally((function(){C(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||Z({_id:null})}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Delivery",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(R.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Delivery Type",children:(0,u.jsx)(S.Z,{value:f.deliveryTypeId,onChange:function(e){w({deliveryTypeId:e})},options:i.map((function(e){return{value:e._id,label:e.title}}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Start Time",required:!0,children:(0,u.jsx)(St.Z,{onChange:function(e){w({startTime:e})},defaultOpenValue:Y()("00:00:00","HH:mm:ss")})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"End Time",required:!0,children:(0,u.jsx)(St.Z,{onChange:function(e){w({endTime:e})},defaultOpenValue:Y()("00:00:00","HH:mm:ss")})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){w({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})}));function Dt(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(i.Z,{className:"site-layout",children:[(0,u.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(r.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(s.rU,{to:"/type",children:"Type  "}),key:"type"},{label:(0,u.jsx)(s.rU,{to:"/offer",children:"Offers  "}),key:"offer"},{label:(0,u.jsx)(s.rU,{to:"/coupon",children:"Coupon"}),key:"coupon"},{label:(0,u.jsx)(s.rU,{to:"/banner",children:"Banner"}),key:"banner"},{label:(0,u.jsx)(s.rU,{to:"/order",children:"Order"}),key:"order"},{label:(0,u.jsx)(s.rU,{to:"/add-new-product",children:"Add New Product"}),key:"add-new-product"},{label:(0,u.jsx)(s.rU,{to:"/addOn",children:"AddOn"}),key:"addOn"},{label:(0,u.jsx)(s.rU,{to:"/category",children:"Category"}),key:"category"},{label:(0,u.jsx)(s.rU,{to:"/application",children:"Application"}),key:"application"},{label:"Delivery Management",key:"delivery-management",children:[{label:(0,u.jsx)(s.rU,{to:"/delivery",children:"Delivery"}),key:"delivery"},{label:(0,u.jsx)(s.rU,{to:"/delivery-type",children:"Delivery Type"}),key:"delivery-type"}]},{label:(0,u.jsx)(s.rU,{to:"/homepageitems",children:"Home Page Items"}),key:"homePageItems"},{label:(0,u.jsx)(s.rU,{to:"/management",children:"User Management"}),key:"management"},{label:null!==f.Z&&void 0!==f.Z&&f.Z.name?f.Z.name:"You",key:"profile",children:[{key:"Profile",label:"Profile"},{key:"Logout",danger:!0,label:"Logout",onClick:function(){window.localStorage.clear(),window.location.reload()}}]}]})}),(0,u.jsx)(i.Z.Content,{children:(0,u.jsx)(l.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(o.Z5,{children:[(0,u.jsx)(o.AW,{path:"type",element:(0,u.jsx)(gt,{}),children:"    "}),(0,u.jsx)(o.AW,{path:"offer",element:(0,u.jsx)(Ke,{}),children:"  "}),(0,u.jsx)(o.AW,{path:"coupon",element:(0,u.jsx)(H,{}),children:" "}),(0,u.jsx)(o.AW,{path:"banner",element:(0,u.jsx)(ge,{})}),(0,u.jsx)(o.AW,{path:"application",element:(0,u.jsx)(ee,{})}),(0,u.jsx)(o.AW,{path:"category",element:(0,u.jsx)(se,{})}),(0,u.jsx)(o.AW,{path:"management",element:(0,u.jsx)(Le,{})}),(0,u.jsx)(o.AW,{path:"homepageitems",element:(0,u.jsx)(rt,{})}),(0,u.jsx)(o.AW,{path:"add-new-product",element:(0,u.jsx)(Ye,{})}),(0,u.jsx)(o.AW,{path:"addOn",element:(0,u.jsx)($e,{})}),(0,u.jsx)(o.AW,{path:"order",element:(0,u.jsx)(ht,{})}),(0,u.jsx)(o.AW,{path:"delivery",element:(0,u.jsx)(It,{})}),(0,u.jsx)(o.AW,{path:"delivery-type",element:(0,u.jsx)(yt,{})}),(0,u.jsx)(o.AW,{path:"*",element:(0,u.jsx)(h,{})})]})})})]})})})}}}]);
//# sourceMappingURL=711.91f58d8f.chunk.js.map